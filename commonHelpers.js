import{a as p,S as h,i as m}from"./assets/vendor-b11e2a50.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))u(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const f of s.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&u(f)}).observe(document,{childList:!0,subtree:!0});function a(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerPolicy&&(s.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?s.credentials="include":t.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function u(t){if(t.ep)return;t.ep=!0;const s=a(t);fetch(t.href,s)}})();const L="44792549-8b3a4a2cfb17648b3cdad98bf",b="https://pixabay.com/api/";async function g(r,e,a){return(await p.get(b,{params:{key:L,q:r,image_type:"photo",orientation:"horizontal",safesearch:!0,page:e,per_page:a}})).data}function y(r){return r.map(e=>`
        <div class="gallery__item">
          <a href="${e.largeImageURL}">
            <img src="${e.webformatURL}" alt="${e.tags}" loading="lazy" />
          </a>
        </div>
      `).join("")}let c="",i=1;const d=15,v=document.querySelector("#search-form"),l=document.querySelector(".gallery"),n=document.querySelector(".load-more"),o=document.querySelector(".loader");v.addEventListener("submit",async r=>{if(r.preventDefault(),c=r.target.elements.searchQuery.value.trim(),!!c){i=1,l.innerHTML="",n.classList.add("hidden"),o.classList.remove("hidden");try{const e=await g(c,i,d),a=y(e.hits);l.innerHTML=a,new h(".gallery a").refresh(),e.totalHits>d&&n.classList.remove("hidden"),o.classList.add("hidden")}catch(e){console.error("Error fetching images:",e),m.error({title:"Error",message:"Failed to fetch images. Please try again later."}),o.classList.add("hidden")}}});n.addEventListener("click",async()=>{i+=1,o.classList.remove("hidden");try{const r=await g(c,i,d),e=y(r.hits);if(l.insertAdjacentHTML("beforeend",e),new h(".gallery a").refresh(),i*d>=r.totalHits)n.classList.add("hidden"),m.info({title:"Info",message:"We're sorry, but you've reached the end of search results."});else{const{height:a}=l.firstElementChild.getBoundingClientRect();window.scrollBy({top:a*2,behavior:"smooth"})}o.classList.add("hidden")}catch(r){console.error("Error fetching images:",r),m.error({title:"Error",message:"Failed to fetch images. Please try again later."}),o.classList.add("hidden")}});document.addEventListener("DOMContentLoaded",()=>{n.classList.add("hidden"),o.classList.add("hidden")});
//# sourceMappingURL=commonHelpers.js.map
