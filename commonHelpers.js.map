{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '44792549-8b3a4a2cfb17648b3cdad98bf';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query, page, perPage) {\n  const response = await axios.get(BASE_URL, {\n    params: {\n      key: API_KEY,\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page: page,\n      per_page: perPage,\n    },\n  });\n  return response.data;\n}\n","export function renderImages(images) {\n  return images\n    .map(\n      image => `\n        <div class=\"gallery__item\">\n          <a href=\"${image.largeImageURL}\">\n            <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" />\n          </a>\n        </div>\n      `\n    )\n    .join('');\n}\n","import { fetchImages } from './js/pixabay-api';\nimport { renderImages } from './js/render-functions';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  let query = '';\n  let page = 1;\n  const perPage = 15;\n  const form = document.querySelector('#search-form');\n  const gallery = document.querySelector('.gallery');\n  const loadMoreBtn = document.querySelector('.load-more');\n  const loader = document.querySelector('.loader');\n\n  let lightbox = new SimpleLightbox('.gallery a');\n\n  form.addEventListener('submit', async e => {\n    e.preventDefault();\n    query = e.target.elements.searchQuery.value.trim();\n    if (!query) return;\n\n    page = 1;\n    gallery.innerHTML = '';\n    loadMoreBtn.classList.add('hidden');\n    loader.classList.remove('hidden');\n\n    try {\n      const data = await fetchImages(query, page, perPage);\n      loader.classList.add('hidden');\n\n      if (data.hits.length === 0) {\n        iziToast.info({\n          title: 'No images found',\n          message: 'Try searching for something else.',\n        });\n        return;\n      }\n\n      const markup = renderImages(data.hits);\n      gallery.innerHTML = markup;\n      lightbox.refresh();\n\n      if (data.totalHits > perPage) {\n        loadMoreBtn.classList.remove('hidden');\n      }\n    } catch (error) {\n      loader.classList.add('hidden');\n      console.error('Error fetching images:', error);\n      iziToast.error({\n        title: 'Error',\n        message: 'Something went wrong. Please try again later.',\n      });\n    }\n  });\n\n  loadMoreBtn.addEventListener('click', async () => {\n    page += 1;\n    loader.classList.remove('hidden');\n\n    try {\n      const data = await fetchImages(query, page, perPage);\n      loader.classList.add('hidden');\n\n      const markup = renderImages(data.hits);\n      gallery.insertAdjacentHTML('beforeend', markup);\n      lightbox.refresh();\n\n      if (page * perPage >= data.totalHits) {\n        loadMoreBtn.classList.add('hidden');\n        iziToast.info({\n          title: 'End of results',\n          message: \"We're sorry, but you've reached the end of search results.\",\n        });\n      } else {\n        window.scrollBy({\n          top:\n            document\n              .querySelector('.gallery')\n              .lastElementChild.getBoundingClientRect().bottom * 2,\n          behavior: 'smooth',\n        });\n      }\n    } catch (error) {\n      loader.classList.add('hidden');\n      console.error('Error fetching images:', error);\n      iziToast.error({\n        title: 'Error',\n        message: 'Something went wrong. Please try again later.',\n      });\n    }\n  });\n\n  loadMoreBtn.classList.add('hidden');\n  loader.classList.add('hidden');\n});\n"],"names":["API_KEY","BASE_URL","fetchImages","query","page","perPage","axios","renderImages","images","image","form","gallery","loadMoreBtn","loader","lightbox","SimpleLightbox","e","data","iziToast","markup","error"],"mappings":"owBAEA,MAAMA,EAAU,qCACVC,EAAW,2BAEV,eAAeC,EAAYC,EAAOC,EAAMC,EAAS,CAYtD,OAXiB,MAAMC,EAAM,IAAIL,EAAU,CACzC,OAAQ,CACN,IAAKD,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAUC,CACX,CACL,CAAG,GACe,IAClB,CClBO,SAASE,EAAaC,EAAQ,CACnC,OAAOA,EACJ,IACCC,GAAS;AAAA;AAAA,qBAEMA,EAAM,aAAa;AAAA,wBAChBA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA,OAIzD,EACA,KAAK,EAAE,CACZ,CCLA,SAAS,iBAAiB,mBAAoB,IAAM,CAClD,IAAIN,EAAQ,GACRC,EAAO,EACX,MAAMC,EAAU,GACVK,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAc,SAAS,cAAc,YAAY,EACjDC,EAAS,SAAS,cAAc,SAAS,EAE/C,IAAIC,EAAW,IAAIC,EAAe,YAAY,EAE9CL,EAAK,iBAAiB,SAAU,MAAMM,GAAK,CAGzC,GAFAA,EAAE,eAAc,EAChBb,EAAQa,EAAE,OAAO,SAAS,YAAY,MAAM,OACxC,EAACb,EAEL,CAAAC,EAAO,EACPO,EAAQ,UAAY,GACpBC,EAAY,UAAU,IAAI,QAAQ,EAClCC,EAAO,UAAU,OAAO,QAAQ,EAEhC,GAAI,CACF,MAAMI,EAAO,MAAMf,EAAYC,EAAOC,EAAMC,CAAO,EAGnD,GAFAQ,EAAO,UAAU,IAAI,QAAQ,EAEzBI,EAAK,KAAK,SAAW,EAAG,CAC1BC,EAAS,KAAK,CACZ,MAAO,kBACP,QAAS,mCACnB,CAAS,EACD,MACD,CAED,MAAMC,EAASZ,EAAaU,EAAK,IAAI,EACrCN,EAAQ,UAAYQ,EACpBL,EAAS,QAAO,EAEZG,EAAK,UAAYZ,GACnBO,EAAY,UAAU,OAAO,QAAQ,CAExC,OAAQQ,EAAO,CACdP,EAAO,UAAU,IAAI,QAAQ,EAC7B,QAAQ,MAAM,yBAA0BO,CAAK,EAC7CF,EAAS,MAAM,CACb,MAAO,QACP,QAAS,+CACjB,CAAO,CACF,EACL,CAAG,EAEDN,EAAY,iBAAiB,QAAS,SAAY,CAChDR,GAAQ,EACRS,EAAO,UAAU,OAAO,QAAQ,EAEhC,GAAI,CACF,MAAMI,EAAO,MAAMf,EAAYC,EAAOC,EAAMC,CAAO,EACnDQ,EAAO,UAAU,IAAI,QAAQ,EAE7B,MAAMM,EAASZ,EAAaU,EAAK,IAAI,EACrCN,EAAQ,mBAAmB,YAAaQ,CAAM,EAC9CL,EAAS,QAAO,EAEZV,EAAOC,GAAWY,EAAK,WACzBL,EAAY,UAAU,IAAI,QAAQ,EAClCM,EAAS,KAAK,CACZ,MAAO,iBACP,QAAS,4DACnB,CAAS,GAED,OAAO,SAAS,CACd,IACE,SACG,cAAc,UAAU,EACxB,iBAAiB,wBAAwB,OAAS,EACvD,SAAU,QACpB,CAAS,CAEJ,OAAQE,EAAO,CACdP,EAAO,UAAU,IAAI,QAAQ,EAC7B,QAAQ,MAAM,yBAA0BO,CAAK,EAC7CF,EAAS,MAAM,CACb,MAAO,QACP,QAAS,+CACjB,CAAO,CACF,CACL,CAAG,EAEDN,EAAY,UAAU,IAAI,QAAQ,EAClCC,EAAO,UAAU,IAAI,QAAQ,CAC/B,CAAC"}